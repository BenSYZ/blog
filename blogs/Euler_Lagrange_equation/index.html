<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>Euler–Lagrange equation</title><script src=/js/if_mobile.js></script>
<script>!function(){$("pre > code").each(function(){var s,n=$(this).parent().attr("class");n==null||n===""?$(this).addClass("hljs"):(s={js:"javascript"},s[n]&&(n=s[n]),$(this).addClass(n))})}</script><link rel=stylesheet href=/css/hljs/snazzy.css><link rel=stylesheet href=/css/hljs/line-numbers.min.css><script src=/js/hljs/highlight.min.js></script>
<script src=/js/hljs/highlightjs-line-numbers.min.js></script>
<script>hljs.highlightAll()</script><script>hljs.initLineNumbersOnLoad()</script><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/footer.css><link rel=stylesheet href=/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=icon id=light-scheme-icon href=/favicons/favicon_B_Light.ico type=image/x-icon><link rel=icon id=dark-scheme-icon href=/favicons/favicon_B_Dark.ico type=image/x-icon><script src=/js/favicon.js></script>
<link rel=stylesheet href=/css/katex.min.css integrity=sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET crossorigin=anonymous><script defer src=/js/katex.min.js integrity=sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb crossorigin=anonymous></script>
<script defer src=/js/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})'></script></head><body><div class=container><div class=header><h1>Euler–Lagrange equation</h1>Tue, 2025-03-25<hr></div><div class=middle><div id=TitleWithToc><div id=TitleOfToc>Euler–Lagrange equation</div></div><div id=content><h2 id=最速降线>最速降线</h2><p>以最速降线为例：一个小球从 <span class="math inline">\(A\)</span> 点<span class="math inline">\((x_1, y_1)\)</span> 移动到 <span class="math inline">\(B\)</span> 点 <span class="math inline">\((x_2, y_2)\)</span>，它耗时最少的路径是怎么样的？不妨设 <span class="math inline">\((x_1,y_1)\)</span> 为 <span class="math inline">\((0,0)\)</span> 点，记为 A 点，</p><p>首先，我们求当小球位于 <span class="math inline">\((x,y)\)</span> 时，它的位移微分：</p><p><span class="math display">\[
ds = \sqrt{(dx)^2+(dy)^2}
\]</span></p><p>其次，我们求当小球位于 <span class="math inline">\((x,y)\)</span> 时，它的速度：</p><p><span class="math display">\[
\frac{1}{2} mv^2 = mg \delta h
\]</span></p><p><span class="math display">\[
v = \sqrt{2gh} = \sqrt{2g(y-y_1)} = \sqrt{2gy}
\]</span></p><p>所以，我们求当小球位于 <span class="math inline">\((x,y)\)</span> 时，走过 <code>ds</code> 所需的时间：</p><p><span class="math display">\[
dt = \frac{ds}{v} = \frac{\sqrt{(dx)^2+(dy)^2}}{\sqrt{2gy}}
\]</span></p><p>提取出分子里的 <span class="math inline">\(dx\)</span> 可得：</p><p><span class="math display">\[
dt = \frac{\sqrt{1+(\frac{dy}{dx})^2}}{\sqrt{2gy}} dx
\]</span></p><p>通常，我们记 <span class="math inline">\(\frac{dy}{dx} = y'\)</span>，所以：</p><p><span class="math display">\[
dt = \frac{\sqrt{1+(y')^2}}{\sqrt{2gy}} dx
\]</span></p><p>所以，从 <span class="math inline">\(A\)</span> 点到 <span class="math inline">\(B\)</span> 点的总耗时是：</p><p><span class="math display">\[
T = \int_{0}^{T} dt = \int_{x_1}^{x_2} \frac{\sqrt{1+(y')^2}}{\sqrt{2gy}} dx
\]</span></p><p>先放一下，因为到这一步我们没法解下去了，怎么求 <span class="math inline">\(T\)</span>？更遑论 <span class="math inline">\(T\)</span> 的最小值了。</p><h2 id=euler-lagrange-equation>Euler-Lagrange Equation</h2><h3 id=核心思想>核心思想</h3><p>其实 Euler-Lagrange Equation 的核心思想就是反推。</p><p>对类似最速降线的问题，我们有什么？</p><ol type=1><li>一个积分式子，这个积分式子代表了系统中的某种属性，例如在最速降线中，这个积分式子代表的就是 <span class="math inline">\(A\)</span> 点到 <span class="math inline">\(B\)</span> 点的时间。</li><li>这个属性最终需要满足的一个条件，例如属性有最小值。</li></ol><p>我们要求的是什么？</p><ul><li><span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 之间的关系。</li></ul><p>这个问题很奇怪，常见的问题是：我知道 <span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 的关系，然后我求得这个属性的值。也就是第二个条件其实是常规问题的最后一步，而我们需要求的东西是常规问题的中间步骤。而第二个条件在从前向后的推导中用不上，我们就对它束手无策。那转变思路，我们是不是可以让这个最后一步向我们这个方向推进一下，从结果反地推回来。也就是说，我们转变目标，先不求这个条件的最小值，我们先求如果要满足这个属性是最小值时，我们需要达到什么条件。这就是我所说的“反推”</p><p>那么，我们再来看挡在路中间的 “<span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 之间的关系”，这是啥？我们该如何表述这种关系？就像学微积分一样，我们先从离散的点开始：</p><ul><li><span class="math inline">\(y_1 = f_1(x)\)</span></li><li><span class="math inline">\(y_2 = f_2(x)\)</span></li><li><span class="math inline">\(y_3 = f_3(x)\)</span></li><li><span class="math inline">\(y_4 = f_4(x)\)</span></li><li>…</li></ul><p>我们可以看到，这种所谓的 “<span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 之间的关系” 被我们用不同的 <span class="math inline">\(f\)</span> 的下标给区分开来了，也就是说，<span class="math inline">\(x\)</span> 映射到 <span class="math inline">\(y\)</span> 关系可以是 <span class="math inline">\(f_1\)</span>, <span class="math inline">\(f_2\)</span>, <span class="math inline">\(f_3\)</span>, … 我们可以记这种关系为 <span class="math inline">\(f_i\)</span>，也就是</p><p><span class="math display">\[
y_i = f_i(x)
\]</span></p><p>如何理解这种奇怪的表示，来张图：</p><figure><img src=./figures/f_i.gif alt><figcaption>f_i</figcaption></figure><p><a href=./figures/f_i.ggb>geogebra 原始图 点我下载</a></p><p>这四条曲线是 <span class="math display">\[
z = \frac{1}{5} y^3 - x y + 3 \text{, where } x = 0,1,2,3
\]</span></p><p>（由于 geogebra 中只能是 z 轴作为纵轴，所以请将 图中的 <span class="math inline">\(z\)</span> 当作 <span class="math inline">\(y\)</span>，图中的 <span class="math inline">\(y\)</span> 当作 <span class="math inline">\(x\)</span>，图中的 <span class="math inline">\(x\)</span> 当作 <span class="math inline">\(i\)</span> ）</p><p>我们可以看到，当 <span class="math inline">\(i\)</span> 取不同值时，<span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 之间成不同的关系。这个 <span class="math inline">\(i\)</span> 其实就是多出的一个维度。</p><p>回到我们的问题，我们想知道，在 <span class="math inline">\(i\)</span> 取何值时，我们的属性（记作 <span class="math inline">\(P\)</span>）可以取到极值。发现没有，除了常规的 <span class="math inline">\(x\)</span> 和 <span class="math inline">\(y\)</span> 这两个维度之外，多了两个维度，<span class="math inline">\(i\)</span> 和 <span class="math inline">\(P\)</span>：随着 <span class="math inline">\(i\)</span> 的变化 <span class="math inline">\(P\)</span> 会发生变化。用数学的式子表示就是：</p><p><span class="math display">\[
P = g(i)
\]</span></p><p>很自然地，当 <span class="math inline">\(i\)</span> 取何值时，<span class="math inline">\(P\)</span> 取极值这个问题可以用求导来解，也就是：</p><p><span class="math display">\[
\frac{dP}{di}
\]</span></p><p>要求导，我们肯定得知道 <span class="math inline">\(g(i)\)</span> 的形式。</p><hr><p>什么是“属性”呢？属性就像一个加权和，权重是什么呢？像是空间中的场，密布在这片空间中，不同的位置（或受其他因素影响）会有不同的属性值。当选择某一条路径时，你就会受到这条路径上的“场”的影响，最终加起来得到最后的属性。</p><p>比如，最简单的场：均匀的场，空间中每一处的加权均是 <span class="math inline">\(1\)</span> ，那么从 A 点到 B 点的属性是什么？就是 <span class="math inline">\(A\)</span> 到 <span class="math inline">\(B\)</span> 之间作一条线，然后这条线被向第三个方向整体偏移 <span class="math inline">\(1\)</span>，属性就是这条曲线到 <span class="math inline">\(x-y\)</span> 平面的积分，对一个均匀的场来说，这个积分就是，曲线的长度乘以高度，什么时候积分最小？取线段时。</p><p>等于其实属性是，在路径走到 <span class="math inline">\((x,y)\)</span> 点时，这点的属性乘以这点附近的路径微元</p><p><span class="math display">\[
dP = g(\ldots) ds
\]</span></p><p><span class="math display">\[
P = \int g ds
\]</span></p><p>就像在最速降线中，</p><p><span class="math display">\[
dt = \frac{1}{v}ds
\]</span></p><p>其中，<span class="math inline">\(g = \frac{1}{v} = \frac{1}{\sqrt{2gy}}\)</span>，而 <span class="math inline">\(ds\)</span> 往往可以写成 <span class="math inline">\(\sqrt{1+dy'} dx\)</span>，也就是 <span class="math inline">\(ds\)</span> 中包含了路径是怎么样的。<span class="math inline">\(P\)</span> 可以写成</p><p><span class="math display">\[
P = \int g(y) f(y') dx
\]</span></p><p>可以将 <span class="math inline">\(g\)</span> 和 <span class="math inline">\(f\)</span> 整合起来，并且以更通用的形式表示：</p><p><span class="math display">\[
P = \int f(y,y',y'',\ldots,x) dx
\]</span></p><hr><p>从前文，我们可以知道 <span class="math inline">\(i\)</span> 是 <span class="math inline">\(y_i\)</span> 中的下标，它代表 <span class="math inline">\(y(x)\)</span> 取不同的表达式，所以上面的式子又可以写成</p><p><span class="math display">\[
P_i = \int f(y_i,y_i',y_i'',\ldots,x) dx
\]</span></p><p>那么 <span class="math inline">\(P\)</span> 关于 <span class="math inline">\(i\)</span> 的导数又是什么呢？</p><p><span class="math display">\[
\begin{aligned}
\frac{dP_i}{di}
&= \frac{d}{di} \int_{x_1}^{x_2} f(y_i,y_i',y_i'',\ldots,x) dx \\
&= \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i} \frac{dy_i}{di} +
\frac{\partial f}{ \partial y_i'} \frac{dy_i'}{di} + \ldots dx
\end{aligned}
\]</span></p><ul><li>先不写二阶导往上的，</li><li><span class="math inline">\(y_i\)</span> 项没啥好处理的</li><li><span class="math inline">\(\partial y_i'\)</span> 在分母也没什么好处理的</li></ul><p>而 <span class="math inline">\(d y_i'\)</span> 在分子可以玩些花样，它首先可以写成 <span class="math inline">\(d (\frac{dy_i}{dx})\)</span>，我们再假设它的性质足够好，可以和 <span class="math inline">\(\frac{d}{di}\)</span> 互换顺序，第二项就成了</p><p><span class="math display">\[
\begin{aligned}
& \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i'} \frac{dy_i'}{di} dx \\
=& \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i'} \frac{d}{di} \frac{d}{dx}y_i dx \\
=& \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i'} \frac{d}{dx} \frac{d}{di} y_idx \\
=& \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i'} \frac{d}{dx} \frac{d y_i}{di}dx \\
=& \int_{A}^{B} \frac{\partial f}{ \partial y_i'} d(\frac{d y_i}{di}) \\
=& (\frac{\partial f}{ \partial y_i'} \frac{d y_i}{di})|_{A}^B -
\int_{A}^{B} \frac{d y_i}{di} d(\frac{\partial f}{ \partial y_i'} ) \\
\end{aligned}
\]</span></p><p>因为，在 A，B 两点，由边界条件可知，<span class="math inline">\(y_i\)</span> 在 <span class="math inline">\(i\)</span> 方向上，是不变的，所有的 <span class="math inline">\(y_i\)</span> 都得满足经过 A，B 两点。虽然，在 <span class="math inline">\(x\)</span> 方向上 <span class="math inline">\(y_i\)</span> 的导数的确可以不为 <span class="math inline">\(0\)</span>，也就是 <span class="math inline">\(\frac{dy_i}{dx} \neq 0\)</span>，但 <span class="math inline">\(\frac{dy_i}{di} \equiv 0\)</span>，所以第一项为 <span class="math inline">\(0\)</span></p><p><span class="math display">\[
\begin{aligned}
& (\frac{\partial f}{ \partial y_i'} \frac{d y_i}{di})|_{A}^B -
\int_{x_1}^{x_2} \frac{d y_i}{di} d(\frac{\partial f}{ \partial y_i'} ) \\
=& - \int_{x_1}^{x_2} \frac{d y_i}{di} \frac{d}{dx}(\frac{\partial f}{ \partial y_i'} ) dx\\
\end{aligned}
\]</span></p><p>那么原来的 <span class="math inline">\(\frac{dP_i}{di}\)</span></p><p><span class="math display">\[
\begin{aligned}
\frac{dP_i}{di}
&= \frac{d}{di} \int_{x_1}^{x_2} f(y_i,y_i',y_i'',\ldots,x) dx \\
&= \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i} \frac{dy_i}{di} +
\frac{\partial f}{ \partial y_i'} \frac{dy_i'}{di} + \ldots dx \\
&= \int_{x_1}^{x_2} \frac{\partial f}{ \partial y_i} \frac{dy_i}{di}
- \frac{d y_i}{di} \frac{d}{dx}(\frac{\partial f}{ \partial y_i'} ) +\ldots dx\\
&= \int_{x_1}^{x_2} \frac{dy_i}{di}
(\frac{\partial f}{ \partial y_i}
- \frac{d}{dx}(\frac{\partial f}{ \partial y_i'}) )
+\ldots dx\\
\end{aligned}
\]</span></p><p>对于任意的 <span class="math inline">\(y_i\)</span>，在 <span class="math inline">\(A\)</span> 到 <span class="math inline">\(B\)</span> 的路径中 <span class="math inline">\(\frac{dy_i}{di}\)</span> 不一定等于0，而且大部分都不等于 <span class="math inline">\(0\)</span>，因为我需要 <span class="math inline">\(y_i\)</span> 之间是不同的，否则我就找不到最优解了，所以为使 <span class="math inline">\(\frac{dP_i}{di}=0\)</span>，下式必须为 <span class="math inline">\(0\)</span></p><p><span class="math display">\[
\frac{\partial f}{ \partial y_i} - \frac{d}{dx}(\frac{\partial f}{ \partial y_i'})
\]</span></p><p>而这就是 Euler-Lagrange 方程。对于高阶项，同理可以推得：</p><p><span class="math display">\[
\frac{\partial f}{ \partial y_i}
- \frac{d}{dx}(\frac{\partial f}{ \partial y_i'})
+ \frac{d}{dx}\frac{d}{dx}(\frac{\partial f}{ \partial y_i''} )
- \frac{d}{dx}\frac{d}{dx}\frac{d}{dx}(\frac{\partial f}{ \partial y_i'''} )
+ \ldots
\]</span></p><h3 id=总结一下>总结一下</h3><p>当路径变化时，这个系统的属性满足：</p><p><span class="math display">\[
P = \int f(y,y',y'',\ldots,x) dx
\]</span></p><p>当路径满足以下条件时，系统属性 P 会处于稳态。</p><p><span class="math display">\[
\frac{\partial f}{ \partial y_i} - \frac{d}{dx}(\frac{\partial f}{ \partial y_i'}) = 0
\]</span></p><h3 id=变更形式>变更形式</h3><p>我们上面讨论的是 <span class="math inline">\(y(x)\)</span> 也就是 <span class="math inline">\(y\)</span> 受 <span class="math inline">\(x\)</span> 变化而变化，给出的是一条路径。很多时候， <span class="math inline">\(y\)</span> 和 <span class="math inline">\(x\)</span> 可以是关于时间 <span class="math inline">\(t\)</span> 的变量，也就是 <span class="math inline">\(y(t)\)</span> 和 <span class="math inline">\(x(t)\)</span>，那么上面这个属性的形式就变成了(多元的证法应该是一样的 TODO)：</p><p><span class="math display">\[
P = \int f(y,y',y'',\ldots,x,x',x'',\ldots) dt
\]</span></p><p><span class="math display">\[
\left\{\begin{matrix}
\frac{\partial f}{ \partial x_i} - \frac{d}{dt}(\frac{\partial f}{ \partial x_i'}) = 0 \\
\frac{\partial f}{ \partial y_j} - \frac{d}{dt}(\frac{\partial f}{ \partial y_j'}) = 0
\end{matrix}\right.
\]</span></p><p>这个 <span class="math inline">\(f\)</span> 就是我们说的拉格朗日量 <span class="math inline">\(\mathcal{L}\)</span>，这个 <span class="math inline">\(P\)</span> 就是常说作用量（先不管这个名字）的 <span class="math inline">\(S\)</span></p><hr><h3 id=拉格朗日量>拉格朗日量</h3><p>我们凑巧地发现，当 <span class="math inline">\(\mathcal{L}\)</span>(就是我们推导的 <span class="math inline">\(f\)</span>) 是这个形式，</p><p><span class="math display">\[
\mathcal{L} = T - U
\]</span></p><p>page 268</p><p>时，拉格朗日公式(那个等于0的式子)等价于牛顿的 <span class="math inline">\(F=m\dot{x}\)</span>。那么此时对 <span class="math inline">\(\mathcal{L}\)</span> 关于时间 <span class="math inline">\(t\)</span> 求积分有什么含义吗？啥含义都没有。但是我们知道的是，它代表的是系统的某种属性，这种属性是稳定的，什么是稳定的？在各个变量方向的变化下它都是极致点，所以我可以对它关于时间（<span class="math inline">\(t\)</span>）求导数，关于位置（<span class="math inline">\(x\)</span> 或者 <span class="math inline">\(y\)</span>）求导数，这些导数都应该是 <span class="math inline">\(0\)</span> 。 从而我们得出</p><p>当 <span class="math inline">\(P\)</span> 关于位置求导数时，最终推得 <span class="math inline">\(\frac{d}{dt} p = 0\)</span>(<span class="math inline">\(p\)</span> 是动量)，满足动量守恒</p><p>当 <span class="math inline">\(P\)</span> 关于时间求导数时，最终推得 <span class="math inline">\(\frac{d}{dt} (\sum p_i \dot{q_i} - \mathcal{L})\)</span>(<span class="math inline">\(p\)</span> 是动量)满足能量守恒</p></div><div id=Rsidebar><div id=Avatar><img alt=avatar src=/avatar.jpg></div><ul><li><a href=/about>About Me</a></li><li><a href=/donate>Donate Me</a></li><li><a href=/>Ben's Blog</a></li></ul>除非注明，本博客所有文章皆为原创。<br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</div></div><div class=footer><div id=tags><a href=https://bensyz.github.io/blog/tags><i class="fas fa-tags"></i></a>
Keywords:<ul><li><a href=https://bensyz.github.io/blog/tags/physics>physics</a></li><li><a href=https://bensyz.github.io/blog/tags/Euler-Lagrange-equation>Euler-Lagrange equation</a></li><li><a href=https://bensyz.github.io/blog/tags/classical-mechanics>classical mechanics</a></li></ul></div><footer><hr><a href=/>Ben's Blog</a><br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<br><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33028102001039"><img alt=public_safety_record src=/icons/public_safety_icon.png>浙公网安备 33028102001039号</a>
<a href=https://beian.miit.gov.cn/ target=_blank>浙ICP备2021032097号-1</a></footer></div></div></body></html>