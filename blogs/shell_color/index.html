<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>Shell echo 输出带样式 (style) 的文字</title><script src=/js/if_mobile.js></script>
<script>!function(){$("pre > code").each(function(){var s,n=$(this).parent().attr("class");n==null||n===""?$(this).addClass("hljs"):(s={js:"javascript"},s[n]&&(n=s[n]),$(this).addClass(n))})}</script><link rel=stylesheet href=/css/hljs/snazzy.css><link rel=stylesheet href=/css/hljs/line-numbers.min.css><script src=/js/hljs/highlight.min.js></script>
<script src=/js/hljs/highlightjs-line-numbers.min.js></script>
<script>hljs.highlightAll()</script><script>hljs.initLineNumbersOnLoad()</script><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/footer.css><link rel=stylesheet href=/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=icon id=light-scheme-icon href=/favicons/favicon_B_Light.ico type=image/x-icon><link rel=icon id=dark-scheme-icon href=/favicons/favicon_B_Dark.ico type=image/x-icon><script src=/js/favicon.js></script></head><body><div class=container><div class=header><h1>Shell echo 输出带样式 (style) 的文字</h1>Mon, 2022-04-04<hr></div><div class=middle><div id=TitleWithToc><div id=TitleOfToc>Shell echo 输出带样式 (style) 的文字</div></div><div id=content><h2 id=introduction>Introduction</h2><p>好久没明白 Shell 的格式化输出，这次看了一些资料，整理了一下。</p><h2 id=method-result>Method & Result</h2><p>我们知道 shell 可以用 <code>-e</code> 来转义 <code>\n</code> 这些符号。由于样式输出也是特殊的输出，所以要使用样式输出也要打开这个开关。那如何表示样式的符号是什么呢？基本格式是这样</p><pre><code>\033[ + 样式码 + m + &quot;要打印的字符&quot;</code></pre><p>这里的样式码就是一些数字，比如 <code>1</code> 代表加粗，<code>32</code> 代表绿色：</p><div class=sourceCode id=cb2><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb2-1><a href=#cb2-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb2-2><a href=#cb2-2 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&#39;\033[1mBold&#39;</span></span>
<span id=cb2-3><a href=#cb2-3 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&#39;\033[32mGreen&#39;</span></span></code></pre></div><figure><img src=./figures/bold.png alt><figcaption>bold</figcaption></figure><figure><img src=./figures/green.png alt><figcaption>green</figcaption></figure><h3 id=样式的分开>样式的分开</h3><p>由于这个样式是管它之后的所有输出，所以你如果先加粗后加颜色，那么后面半截也会加粗，比如：</p><div class=sourceCode id=cb3><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb3-1><a href=#cb3-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb3-2><a href=#cb3-2 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&#39;\033[1mBold&#39;</span> <span class=st>&#39;\033[32mGreen&#39;</span></span></code></pre></div><figure><img src=./figures/bold_and_green_mixed.png alt><figcaption>bold_and_green_mixed</figcaption></figure><p>所以就像括号一样我们用无样式(样式码0) 来作为右半边的括号。</p><div class=sourceCode id=cb4><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb4-1><a href=#cb4-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb4-2><a href=#cb4-2 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&#39;\033[1mBold\033[0m&#39;</span> <span class=st>&#39;\033[32mGreen\033[0m&#39;</span></span></code></pre></div><figure><img src=./figures/bold_and_green_seperated.png alt><figcaption>bold_and_green_seperated</figcaption></figure><h3 id=样式的合并>样式的合并</h3><p>根据上面一节，我们知道如何叠加几个样式，比如加粗又加绿:</p><div class=sourceCode id=cb5><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb5-1><a href=#cb5-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb5-2><a href=#cb5-2 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&#39;\033[1m\033[32mBold and Green\033[0m&#39;</span></span></code></pre></div><figure><img src=./figures/bold_and_green_together.png alt><figcaption>bold_and_green_together</figcaption></figure><p>它有个简略的写法：用分号 <code>;</code> 分开两个样式码。比如加粗又加绿:</p><div class=sourceCode id=cb6><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb6-1><a href=#cb6-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb6-2><a href=#cb6-2 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&#39;\033[1;32mBold and Green\033[0m&#39;</span></span></code></pre></div><figure><img src=./figures/bold_and_green_together_simpler.png alt><figcaption>bold_and_green_together_simpler</figcaption></figure><h3 id=列出-shell-支持的所有样式>列出 Shell 支持的所有样式：</h3><p>我们可以用一个小的脚本来列出所有样式</p><div class=sourceCode id=cb7><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb7-1><a href=#cb7-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb7-2><a href=#cb7-2 aria-hidden=true></a><span class=kw>for</span> <span class=ex>i</span> in <span class=va>$(</span><span class=fu>seq</span> 0 109<span class=va>)</span><span class=kw>;do</span></span>
<span id=cb7-3><a href=#cb7-3 aria-hidden=true></a>    <span class=bu>echo</span> -e <span class=st>&#39;\033[&#39;</span><span class=va>$i</span><span class=st>&#39;m&#39;</span><span class=va>$i</span><span class=st>&#39;\033[0m &#39;</span></span>
<span id=cb7-4><a href=#cb7-4 aria-hidden=true></a><span class=kw>done</span></span></code></pre></div><p>由于版面有限，我只选取了部分有效段展示：</p><ul><li>所有颜色：</li></ul><figure><img src=./figures/all_styles.png alt><figcaption>all_styles</figcaption></figure><ul><li>反色：</li></ul><figure><img src=./figures/all_styles_reverse.png alt><figcaption>all_styles_reverse</figcaption></figure><h3 id=tips>Tips</h3><p>不知发现没有，虽然打印出来好看了，但是脚本却变丑了，很难阅读，因此我们可以把这些样式定义成变量，要用时用变量来格式化输出：</p><div class=sourceCode id=cb8><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb8-1><a href=#cb8-1 aria-hidden=true></a><span class=co>#!/bin/sh</span></span>
<span id=cb8-2><a href=#cb8-2 aria-hidden=true></a><span class=va>shellStyleNone=</span><span class=st>&#39;\033[0m&#39;</span></span>
<span id=cb8-3><a href=#cb8-3 aria-hidden=true></a><span class=va>shellStyleGreen=</span><span class=st>&#39;\033[33m&#39;</span></span>
<span id=cb8-4><a href=#cb8-4 aria-hidden=true></a><span class=va>shellStyleBold=</span><span class=st>&#39;\033[1m&#39;</span></span>
<span id=cb8-5><a href=#cb8-5 aria-hidden=true></a></span>
<span id=cb8-6><a href=#cb8-6 aria-hidden=true></a><span class=bu>echo</span> -e <span class=st>&quot;</span><span class=va>$shellStyleBold</span><span class=st>&quot;</span>Bold<span class=st>&quot;</span><span class=va>$shellStyleNone</span><span class=st>&quot;</span> <span class=st>&quot;</span><span class=va>$shellStyleGreen</span><span class=st>&quot;</span>Green<span class=st>&quot;</span><span class=va>$shellStyleNone</span><span class=st>&quot;</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>格式化输出：</p><pre><code>\033[ + 样式码 + m +    &quot;要打印的字符&quot;    + \033[ + 无样式码 + m</code></pre><p>叠加多个样式的话，样式码可以用 <code>;</code> 来分开</p></div><div id=Rsidebar><div id=Avatar><img alt=avatar src=/avatar.jpg></div><ul><li><a href=/about>About Me</a></li><li><a href=/donate>Donate Me</a></li><li><a href=/>Ben's Blog</a></li></ul>除非注明，本博客所有文章皆为原创。<br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</div></div><div class=footer><div id=tags><a href=https://bensyz.github.io/blog/tags><i class="fas fa-tags"></i></a>
Keywords:<ul><li><a href=https://bensyz.github.io/blog/tags/shell>shell</a></li><li><a href=https://bensyz.github.io/blog/tags/beauty>beauty</a></li><li><a href=https://bensyz.github.io/blog/tags/Linux>Linux</a></li></ul></div><footer><hr><a href=/>Ben's Blog</a><br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<br><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33028102001039"><img alt=public_safety_record src=/icons/public_safety_icon.png>浙公网安备 33028102001039号</a>
<a href=https://beian.miit.gov.cn/ target=_blank>浙ICP备2021032097号-1</a></footer></div></div></body></html>