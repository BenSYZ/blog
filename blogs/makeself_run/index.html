<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>makeself 和 .run 文件</title><script src=/js/if_mobile.js></script>
<script>!function(){$("pre > code").each(function(){var s,n=$(this).parent().attr("class");n==null||n===""?$(this).addClass("hljs"):(s={js:"javascript"},s[n]&&(n=s[n]),$(this).addClass(n))})}</script><link rel=stylesheet href=/css/hljs/snazzy.css><link rel=stylesheet href=/css/hljs/line-numbers.min.css><script src=/js/hljs/highlight.min.js></script>
<script src=/js/hljs/highlightjs-line-numbers.min.js></script>
<script>hljs.highlightAll()</script><script>hljs.initLineNumbersOnLoad()</script><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/footer.css><link rel=stylesheet href=/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=icon id=light-scheme-icon href=/favicons/favicon_B_Light.ico type=image/x-icon><link rel=icon id=dark-scheme-icon href=/favicons/favicon_B_Dark.ico type=image/x-icon><script src=/js/favicon.js></script></head><body><div class=container><div class=header><h1>makeself 和 .run 文件</h1>Mon, 2023-06-12<hr></div><div class=middle><div id=TitleWithToc><div id=TitleOfToc>makeself 和 .run 文件</div></div><div id=content><h2 id=什么是-makeself-以及-.run-文件是什么>什么是 makeself 以及 .run 文件是什么</h2><p>简单来说，makeself 把一些文件打成压缩包，然后把这个压缩包打包成 POSIX sh 脚本。</p><p>很多巨大 <code>xxx.run</code> 文件或者 <code>.sh</code> 就是 <code>makself</code> 打出来的，它不是简单的一个 shell 脚本，它自包含了压缩包。(当然 Linux 中扩展名无关紧要，只是 .run 通常是)<code>NVIDIA-Linux-xxx.run</code> 就是用这个打出来的。印象当中 <code>Mathematica</code> 的 <code>Mathematica_13.2.1_LINUX.sh</code> 好像也是这个打出来的。</p><h3 id=如何使用-makeself>如何使用 makeself</h3><h2 id=如何打包>如何打包：</h2><p>如下目录结构</p><pre class=tree><code>.
└── dir
    ├── file1
    ├── file2
    └── install.sh</code></pre><div class=sourceCode id=cb2><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb2-1><a href=#cb2-1 aria-hidden=true></a><span class=ex>makeself</span> dir test_makeself.run v0.1 ./install.sh</span></code></pre></div><p>就会在当前目录生成 <code>./test_makeself.run</code></p><p>更多参数详见 man.</p><h2 id=如何查看包>如何查看包</h2><p><strong>警告</strong>：这个脚本是很随意的，所以下面的参数只是通常情况下可能支持的参数。请一定要确保脚本是来自于可信源，否则有可能你只是想查看帮助，实际上执行了恶意程序。</p><h3 id=帮助>帮助</h3><pre><code>./test_makeself.run --help</code></pre><h3 id=查看解包后执行的脚本和参数>查看解包后执行的脚本和参数</h3><pre class=console><code>  ➜  ./test_makeself.run --info
Identification: v0.1
Target directory: dir
Uncompressed size: 4 KB
Compression: gzip
Encryption: n
Date of packaging: Mon Jun 12 19:23:34 CST 2023
Built with Makeself version 2.5.0
Build command was: /usr/bin/makeself \
    &quot;dir&quot; \
    &quot;test_makeself.run&quot; \
    &quot;v0.1&quot; \
    &quot;./install.sh&quot;
Script run after extraction:
     ./install.sh
dir will be removed after extraction</code></pre><h3 id=解包>解包</h3><div class=sourceCode id=cb5><pre class="sourceCode sh"><code class="sourceCode bash"><span id=cb5-1><a href=#cb5-1 aria-hidden=true></a><span class=ex>./test_makeself.run</span> --noexec --target extract_dir</span></code></pre></div><pre class=tree><code>extract_dir
├── file1
├── file2
└── install.sh</code></pre></div><div id=Rsidebar><div id=Avatar><img alt=avatar src=/avatar.jpg></div><ul><li><a href=/about>About Me</a></li><li><a href=/donate>Donate Me</a></li><li><a href=/>Ben's Blog</a></li></ul>除非注明，本博客所有文章皆为原创。<br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</div></div><div class=footer><div id=tags><a href=https://bensyz.github.io/blog/tags><i class="fas fa-tags"></i></a>
Keywords:<ul><li><a href=https://bensyz.github.io/blog/tags/makeself>makeself</a></li><li><a href=https://bensyz.github.io/blog/tags/run>run</a></li><li><a href=https://bensyz.github.io/blog/tags/sh>sh</a></li></ul></div><footer><hr><a href=/>Ben's Blog</a><br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<br><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33028102001039"><img alt=public_safety_record src=/icons/public_safety_icon.png>浙公网安备 33028102001039号</a>
<a href=https://beian.miit.gov.cn/ target=_blank>浙ICP备2021032097号-1</a></footer></div></div></body></html>