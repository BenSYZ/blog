<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>gcc support __FILE_NAME__ macro</title><script src=/js/if_mobile.js></script>
<script>!function(){$("pre > code").each(function(){var s,n=$(this).parent().attr("class");n==null||n===""?$(this).addClass("hljs"):(s={js:"javascript"},s[n]&&(n=s[n]),$(this).addClass(n))})}</script><link rel=stylesheet href=/css/hljs/snazzy.css><link rel=stylesheet href=/css/hljs/line-numbers.min.css><script src=/js/hljs/highlight.min.js></script>
<script src=/js/hljs/highlightjs-line-numbers.min.js></script>
<script>hljs.highlightAll()</script><script>hljs.initLineNumbersOnLoad()</script><link rel=stylesheet href=/css/code.css><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/footer.css><link rel=stylesheet href=/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous><link rel=icon id=light-scheme-icon href=/favicons/favicon_B_Light.ico type=image/x-icon><link rel=icon id=dark-scheme-icon href=/favicons/favicon_B_Dark.ico type=image/x-icon><script src=/js/favicon.js></script></head><body><div class=container><div class=header><h1>gcc support __FILE_NAME__ macro</h1>Fri, 2023-06-02<br>本文最后修改于 Tue, 2023-06-06<hr></div><div class=middle><div id=TitleWithToc><div id=TitleOfToc>gcc support __FILE_NAME__ macro</div></div><div id=content><h2 id=update>2023-06-06 update:</h2><p>windows does not support shell basename. Makefile native support <code>basname</code> like, it’s <code>notdir</code>.</p><h2 id=contents>contents</h2><p>Since gcc-12, gcc native support <code>__FILE_NAME__</code> macro. <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=42579">ref</a></p><p>Here we provide some methods to make gcc version lower than 12 support <code>__FILE_NAME__</code>:</p><p>Makefile:</p><pre class=make><code>CXX_FLAGS+=-D__FILE_NAME__=\&quot;$(notdir $&lt;)\&quot;

test: test.c
    gcc-7 $(CXX_FLAGS) $&lt;</code></pre><p>Qt pro:</p><pre class=config><code>DEFINES += &#39;__FILE_NAME__=\\\&quot;$(notdir $&lt;)\\\&quot;&#39;</code></pre><p>Some information of macro is at <a href=../macro_in_gcc_Makefile_qmake>here</a>.</p></div><div id=Rsidebar><div id=Avatar><img alt=avatar src=/avatar.jpg></div><ul><li><a href=/about>About Me</a></li><li><a href=/donate>Donate Me</a></li><li><a href=/>Ben's Blog</a></li></ul>除非注明，本博客所有文章皆为原创。<br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</div></div><div class=footer><div id=tags><a href=https://bensyz.github.io/blog/tags><i class="fas fa-tags"></i></a>
Keywords:<ul><li><a href=https://bensyz.github.io/blog/tags/gcc>gcc</a></li><li><a href=https://bensyz.github.io/blog/tags/macro>macro</a></li><li><a href=https://bensyz.github.io/blog/tags/c>c</a></li></ul></div><footer><hr><a href=/>Ben's Blog</a><br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<br><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33028102001039"><img alt=public_safety_record src=/icons/public_safety_icon.png>浙公网安备 33028102001039号</a>
<a href=https://beian.miit.gov.cn/ target=_blank>浙ICP备2021032097号-1</a></footer></div></div></body></html>